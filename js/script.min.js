var apexMonacoEditor=function(e){"use strict";function t(t,r){var i=t.items2Submit;o.loader.start(t.regionSel);var a=o.splitString2Array(r);e.debug.info({fct:o.featureDetails.name+" - uploadFiles",msg:"Upload started!",strArr:a,featureDetails:o.featureDetails}),e.server.plugin(t.ajaxID,{x01:"POST",f01:a,pageItems:i},{success:function(r){$(t.regionIDRefreshSel).trigger("upload-finished"),e.debug.info({fct:o.featureDetails.name+" - uploadFiles",msg:"Upload finished!",pData:r,featureDetails:o.featureDetails}),o.loader.stop(t.regionSel)},error:function(r,i,a){$(t.regionIDRefreshSel).trigger("upload-error"),e.debug.error({fct:o.featureDetails.name+" - uploadFiles",msg:"Upload error!",jqXHR:r,textStatus:i,errorThrown:a,featureDetails:o.featureDetails}),o.loader.stop(t.regionSel),e.event.trigger(pOpts.affElementID,"imageuploaderror")}})}function r(e,t,r,i){var a=document.getElementById(e.regionID);if(r){var o=monaco.editor.createModel(t,e.language),s=monaco.editor.createModel(i,e.language);(n=monaco.editor.createDiffEditor(a,{originalEditable:!e.readOnly,readOnly:!0,language:e.language,theme:e.theme,automaticLayout:!0})).setModel({original:o,modified:s})}else n=monaco.editor.create(a,{value:t,language:e.language,theme:e.theme,automaticLayout:!0,readOnly:e.readOnly})}function i(e){var t=$("<div></div>");t.addClass("apex-vs-monaco-editor-toolbar-container-btn"),t.addClass("a-Button");var r=$("<span></span>");return r.addClass("fa"),r.addClass(e),r.addClass("apex-vs-monaco-editor-toolbar-container-btn-icon"),t.append(r),t}function a(e,a){var s,l,d=!1;o.isDefinedAndNotNull(e)&&o.isDefinedAndNotNull(e.rows)&&o.isDefinedAndNotNull(e.rows[0])&&(o.isDefinedAndNotNull(e.rows[0].VALUE_EDIT)&&(s=e.rows[0].VALUE_EDIT),o.isDefinedAndNotNull(e.rows[0].VALUE_DIFF)?(l=e.rows[0].VALUE_DIFF,d=!0):l=s,o.isDefinedAndNotNull(e.rows[0].LANGUAGE)&&(a.language=e.rows[0].LANGUAGE)),require.config({paths:{vs:a.path}}),require(["vs/editor/editor.main"],function(){r(a,s,d,l),function(e,a,o,s){var l=!1,d=o;if(e.buttonsStr&&e.buttonsStr.length>0){var u=$("<div></div>");if(u.addClass("apex-vs-monaco-editor-toolbar-container"),u.css("border-bottom","1px solid rgba(0,0,0,0.075)"),e.buttons.indexOf("undo")>-1){var g=i("fa-undo");g.on("click",function(){d?n.getOriginalEditor().getModel().undo():n.getModel().undo()}),u.append(g)}if(e.buttons.indexOf("redo")>-1){var f=i("fa-repeat");f.on("click",function(){d?n.getOriginalEditor().getModel().redo():n.getModel().redo()}),u.append(f)}if(e.buttons.indexOf("search")>-1){var c=i("fa-search");c.on("click",function(){(l=!l)?d?(n.getOriginalEditor().getAction("actions.find").run(),n.getModifiedEditor().getAction("actions.find").run()):n.getAction("actions.find").run():d?(n.getOriginalEditor().trigger("keyboard","closeFindWidget"),n.getModifiedEditor().trigger("keyboard","closeFindWidget")):n.trigger("keyboard","closeFindWidget")}),u.append(c)}if(e.buttons.indexOf("diff")>-1){var p=i("fa-arrows-h");p.on("click",function(){l=!1;var t;t=(d=!d)?n.getValue():n.getModel().original.getValue(),n.dispose(),r(e,t,d,s)}),u.append(p)}if(e.buttons.indexOf("save")>-1){var D=i("fa-save");D.on("click",function(){var r;r=d?n.getModel().original.getValue():n.getValue(),t(e,r)}),u.append(D)}$(e.regionSel).prepend(u)}$(e.regionIDRefreshSel).on("save",function(){var r;r=d?n.getModel().original.getValue():n.getValue(),t(e,r)})}(a,0,d,l),o.loader.stop(a.regionSel),$(a.regionIDRefreshSel).trigger("rendered")})}var n,o={featureDetails:{name:"APEX-VS-Monaco-Editor",scriptVersion:"1.0.2.1",utilVersion:"1.6",url:"https://github.com/RonnyWeiss",url2:"https://linktr.ee/ronny.weiss",license:"MIT-License"},isDefinedAndNotNull:function(e){return void 0!==e&&null!==e&&""!=e},loader:{start:function(t,r){r&&$(t).css("min-height","100px"),e.util.showSpinner($(t))},stop:function(e,t){t&&$(e).css("min-height",""),$(e+" > .u-Processing").remove(),$(e+" > .ct-loader").remove()}},splitString2Array:function(t){if(void 0!==t&&null!==t&&""!=t&&t.length>0){if(e&&e.server&&e.server.chunk)return e.server.chunk(t);var r,i=[];if(t.length>8e3){for(i=[],r=0;r<t.length;)i.push(t.substr(r,8e3)),r+=8e3;return i}return i.push(t),i}return[]}};return{initialize:function(t,r,i,n,s,l,d,u,g,f){e.debug.info({fct:o.featureDetails.name+" - initialize",arguments:{pRegionID:t,pRegionIDRefresh:r,pAjaxID:i,pItems2Submit:n,pPath:s,pHeight:l,pLanguage:d,pTheme:u,pButtons:g},featureDetails:o.featureDetails});var c={};c.buttons=g.split(":"),c.buttonsStr=g,c.height=l||"50vh",c.language=d||"plaintext",c.theme=u||"vs-dark",c.regionID=t,c.regionSel="#"+t,c.regionIDRefresh=r,c.regionIDRefreshSel="#"+r,c.path=s,c.ajaxID=i,c.readOnly=f,$(c.regionSel).height(c.height),$(c.regionSel).css("border","1px solid rgba(0,0,0,0.075)"),$(c.regionSel).css("overflow","hidden"),function(t){var r=t.items2Submit;o.loader.start(t.regionSel),e.server.plugin(t.ajaxID,{pageItems:r,x01:"GET"},{success:function(r){e.debug.info({fct:o.featureDetails.name+" - getData",ajaxResponse:r,featureDetails:o.featureDetails}),a(r,t)},error:function(r){e.debug.error({fct:o.featureDetails.name+" - getData",ajaxResponse:r,featureDetails:o.featureDetails}),o.loader.stop(t.regionSel)},dataType:"json"})}(c)}}};